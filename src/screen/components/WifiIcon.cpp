#include <screen/components/WifiIcon.h>

const unsigned char disconnected[] PROGMEM = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xff, 0x00, 0x03, 0xff, 0xc0, 0x0f, 0xff, 0xf0, 0x3f, 0x81, 0xfc, 0x3c, 0x00, 0x3c, 0x10, 0x7e,
    0x08, 0x01, 0xff, 0x80, 0x03, 0xff, 0xc0, 0x03, 0x81, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x3c, 0x00,
    0x00, 0x7e, 0x00, 0x00, 0x3c, 0x66, 0x00, 0x3c, 0x7e, 0x00, 0x00, 0x3c, 0x00, 0x00, 0x3c, 0x00,
    0x00, 0x7e, 0x00, 0x00, 0x66, 0x00, 0x00, 0x00};

const unsigned char connected[] PROGMEM = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xff, 0x00, 0x03, 0xff, 0xc0, 0x0f, 0xff, 0xf0, 0x3f, 0x81, 0xfc, 0x3c, 0x00, 0x3c, 0x30, 0x7e,
    0x0c, 0x01, 0xff, 0x80, 0x07, 0xff, 0xe0, 0x07, 0x81, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x3c, 0x00,
    0x00, 0x7e, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x1c, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00};

const unsigned char bar2[] PROGMEM = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x01, 0xff, 0x80, 0x07, 0xff, 0xe0, 0x07, 0x81, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x3c, 0x00,
    0x00, 0x7e, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x1c, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00};

const unsigned char bar1[] PROGMEM = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3c, 0x00,
    0x00, 0x7e, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x1c, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00};

void WifiIcon::drawImpl()
{
    _display->fillRect(_x, _y, 24, 24, BLACK);

    switch (_status)
    {
    case WiFiStatus::CONNECTING:
        switch(_animStatus)
        {
        case BAR1:
            _display->drawBitmap(_x, _y, bar1, 24, 24, WHITE);
            break;
        case BAR2:
            _display->drawBitmap(_x, _y, bar2, 24, 24, WHITE);
            break;
        
        default:
            break;
        }
        break;
    case WiFiStatus::CONNECTED:
        _display->drawBitmap(_x, _y, connected, 24, 24, WHITE);
        break;
    case WiFiStatus::DISCONNECTED:
        _display->drawBitmap(_x, _y, disconnected, 24, 24, WHITE);

    default:
        break;
    }

}

void WifiIcon::tickImpl()
{
    _animStatus = (_animStatus + 1) % 2;
}
